//splitString.cpp

// CSCI 1300 Fall 2022
// Author: Mitch Siegel
// Recitation: 201 â€“ Elise Tate
// Homework 5 - Problem # 4

#include <iostream>
#include <cassert>
using namespace std;

/*
 * the split function takes in a string, the seperator, and then the arr, and the arr_size.
 * It will split the function into an array, splitting it by the seperator.
 * If there are more splits than the array size, it will fill it with as many as possible.
*/
int split(string input_string,char seperator, string arr[],int arr_size)
{
    int last_split = 0;
    int array_split = 0;
    int seperator_count = 0;
    int current_part_length = 0;
    //make sure the string is not zero.
    if(input_string.length() == 0)
    {
        return 0;
    }
    //count how many splits we should expect
    for(int i = 0; i < input_string.length(); i++)
    {
        if(input_string[i] == seperator)
        {
            seperator_count++;
        }
    }
    if(seperator_count == 0)
    {
        arr[0] = input_string;
        return 1;
    }
    for(int i = 0;i < input_string.length(); i++)
    {
        if(input_string[i] == seperator)
        {
            arr[array_split] = input_string.substr(last_split,current_part_length);
            array_split++;
            last_split = i + 1;
            current_part_length = 0;
            //handle the remaining string 
            if(array_split == seperator_count)
            {
                arr[array_split] = input_string.substr(last_split,input_string.length());
                array_split++;
            }
        }
        else
        {
            //if we don't have a seperator, we need to increment the current_part_length
            current_part_length++;
        }
    }
    //make sure that the seperator count
    if(seperator_count+1 > arr_size)
    {
        return -1;
    }
    return array_split;
}
int main()
{
    string testcase = "three,two,one";
    char separator = ',';
    int size = 2;
    string arr[size];
    // numSplits is the value returned by split
    int numSplits = split(testcase, separator, arr, size);
    cout << "Function returned value: " << numSplits << endl;
    // print array contents
    for (int i=0; i < size; i++){
        cout << "arr["<< i << "]:" << arr[i] << endl;
    }
    return 0;
}